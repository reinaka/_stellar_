{"ast":null,"code":"var _jsxFileName = \"/Users/reinaka/Documents/untitled folder/_stellar_/react-burger/src/pages/profile-block/profile-page/profile-page.tsx\",\n  _s = $RefreshSig$();\nimport { Input, EmailInput, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './profile-page.module.css';\nimport { selectUserName, selectUserEmail, selectUserPassword } from '../../../services/functions/selectorFunctions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getUserInfo, changeUserInfo } from '../../../services/actions/auth-actions';\nimport { useEffect, useCallback, useState } from 'react';\nimport { GET_USER_INFO_ENDPOINT, BASE_URL } from '../../../constants/constants';\nimport { useFormAndValidation } from '../../../services/hooks/use-form-validation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function ProfilePage() {\n  _s();\n  const dispatch = useDispatch();\n  const [buttonsVisible, setButtonsVisible] = useState(false);\n  useEffect(() => {\n    dispatch(getUserInfo());\n  }, [dispatch]);\n  const userName = useSelector(selectUserName);\n  const userEmail = useSelector(selectUserEmail);\n  const userPassword = useSelector(selectUserPassword);\n  const [initialValues, setInitialValues] = useState({\n    name: userName,\n    email: userEmail\n  });\n  useEffect(() => {\n    setInitialValues({\n      name: userName,\n      email: userEmail\n    });\n  }, [userEmail, userName]);\n  const {\n    values,\n    handleChange,\n    resetForm\n  } = useFormAndValidation(initialValues);\n  const handleReset = useCallback(() => {\n    dispatch(changeUserInfo(values));\n  }, [values, dispatch]);\n  useEffect(() => {\n    if (userEmail !== values.email || userName !== values.name || userPassword !== values.password) {\n      setButtonsVisible(true);\n    } else {\n      setButtonsVisible(false);\n    }\n  }, [userEmail, userName, values.email, userPassword, values.name, values.password]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: styles.general,\n    onSubmit: e => {\n      e.preventDefault();\n      handleReset();\n    },\n    method: \"PATCH\",\n    action: `${BASE_URL}${GET_USER_INFO_ENDPOINT}`,\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      extraClass: \"mb-6\",\n      placeholder: \"\\u0418\\u043C\\u044F\",\n      value: (values === null || values === void 0 ? void 0 : values.name) || \"\",\n      icon: \"EditIcon\",\n      onChange: e => handleChange(e),\n      name: \"name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(EmailInput, {\n      extraClass: \"mb-6\",\n      placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\",\n      value: (values === null || values === void 0 ? void 0 : values.email) || \"\",\n      isIcon: true,\n      onChange: e => handleChange(e),\n      name: \"email\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PasswordInput, {\n      placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      value: (values === null || values === void 0 ? void 0 : values.password) || \"\",\n      onChange: e => handleChange(e),\n      name: \"password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), buttonsVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.buttonBox,\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        extraClass: \"mt-6\",\n        htmlType: \"submit\",\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        extraClass: \"mt-6\",\n        htmlType: \"button\",\n        onClick: () => resetForm(),\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n_s(ProfilePage, \"CPsF4uDuYQJraCwkvJaHXoAudwA=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useFormAndValidation];\n});\n_c = ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["Input","EmailInput","PasswordInput","Button","styles","selectUserName","selectUserEmail","selectUserPassword","useSelector","useDispatch","getUserInfo","changeUserInfo","useEffect","useCallback","useState","GET_USER_INFO_ENDPOINT","BASE_URL","useFormAndValidation","jsxDEV","_jsxDEV","ProfilePage","_s","dispatch","buttonsVisible","setButtonsVisible","userName","userEmail","userPassword","initialValues","setInitialValues","name","email","values","handleChange","resetForm","handleReset","password","className","general","onSubmit","e","preventDefault","method","action","children","extraClass","placeholder","value","icon","onChange","fileName","_jsxFileName","lineNumber","columnNumber","isIcon","buttonBox","htmlType","onClick","_c","$RefreshReg$"],"sources":["/Users/reinaka/Documents/untitled folder/_stellar_/react-burger/src/pages/profile-block/profile-page/profile-page.tsx"],"sourcesContent":["import { Input, EmailInput, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './profile-page.module.css';\nimport { selectUserName, selectUserEmail, selectUserPassword } from '../../../services/functions/selectorFunctions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getUserInfo, changeUserInfo } from '../../../services/actions/auth-actions';\nimport { useEffect, useCallback, useState } from 'react';\nimport { GET_USER_INFO_ENDPOINT, BASE_URL } from '../../../constants/constants';\nimport { useFormAndValidation } from '../../../services/hooks/use-form-validation';\n\ntype FormStateType = {\n    name : string | undefined,\n    email : string | undefined,\n    password? : string | undefined,\n};\n\nexport function ProfilePage() {\n    const dispatch = useDispatch() as any;\n    const [buttonsVisible, setButtonsVisible] = useState(false);\n\n    useEffect(() => {\n        dispatch(getUserInfo());\n    }, [dispatch]);\n\n\n    const userName = useSelector(selectUserName);\n    const userEmail = useSelector(selectUserEmail);\n    const userPassword = useSelector(selectUserPassword);\n    const [initialValues, setInitialValues] = useState<FormStateType>({\n        name: userName,\n        email: userEmail,\n    });\n\n    useEffect(() => {\n        setInitialValues({\n            name: userName,\n            email: userEmail,\n        })\n    }, [userEmail, userName]);\n\n    const {values, handleChange, resetForm} = useFormAndValidation<FormStateType>(initialValues);\n\n    const handleReset = useCallback(() => {\n        dispatch(changeUserInfo(values));\n    }, [values, dispatch]);\n\n    useEffect(() => {\n        if(userEmail !== values.email || userName !== values.name || userPassword !== values.password) {\n            setButtonsVisible(true);\n        } else {\n            setButtonsVisible(false);\n        }\n    }, [userEmail, userName, values.email, userPassword, values.name, values.password]);\n\n    return (\n        <form className={styles.general}\n            onSubmit={(e) => {e.preventDefault(); handleReset()}}\n            method=\"PATCH\" \n            action={`${BASE_URL}${GET_USER_INFO_ENDPOINT}`}\n        >\n            <Input \n                extraClass=\"mb-6\" \n                placeholder=\"Имя\" \n                value={values?.name || \"\"} \n                icon=\"EditIcon\"\n                onChange={e => handleChange(e)}\n                name=\"name\"\n            />\n            <EmailInput \n                extraClass=\"mb-6\" \n                placeholder=\"Логин\" \n                value={values?.email || \"\"} \n                isIcon={true}\n                onChange={e => handleChange(e)}\n                name=\"email\"\n            />\n            <PasswordInput \n                placeholder=\"Пароль\" \n                value={values?.password || \"\"} \n                onChange={e => handleChange(e)}\n                name=\"password\"\n            />\n            {buttonsVisible && (\n                <div className={styles.buttonBox}>\n                <Button extraClass=\"mt-6\" htmlType='submit'>Сохранить</Button>\n                <Button extraClass=\"mt-6\" htmlType='button' onClick={() => resetForm()}>Отменить</Button>\n            </div>\n            )}\n        </form> \n    ) \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}