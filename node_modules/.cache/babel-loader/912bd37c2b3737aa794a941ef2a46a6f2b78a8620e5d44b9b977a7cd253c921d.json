{"ast":null,"code":"import { GET_ORDER_NUMBER_ENDPOINT } from '../../constants/constants';\nimport { getServerResponse } from '../functions/getServerResponse';\nimport { CLEAR_CONSTRUCTOR } from './constructor-actions';\nexport const UPLOAD_ORDER_DETAILS_REQUEST = 'UPLOAD_ORDER_DETAILS_REQUEST';\nexport const UPLOAD_ORDER_DETAILS_SUCCESS = 'UPLOAD_ORDER_DETAILS_SUCCESS';\nexport const UPLOAD_ORDER_DETAILS_FAILED = 'UPLOAD_ORDER_DETAILS_FAILED';\nexport const getOrderNum = dataToPost => {\n  return async function (dispatch) {\n    try {\n      dispatch({\n        type: UPLOAD_ORDER_DETAILS_REQUEST\n      });\n      getServerResponse(GET_ORDER_NUMBER_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          authorization: localStorage.getItem('accessToken')\n        },\n        body: JSON.stringify(dataToPost)\n      }).then(res => {\n        dispatch({\n          type: UPLOAD_ORDER_DETAILS_SUCCESS,\n          payload: res.order.number\n        });\n        dispatch({\n          type: CLEAR_CONSTRUCTOR\n        });\n      });\n    } catch (e) {\n      dispatch({\n        type: UPLOAD_ORDER_DETAILS_FAILED\n      });\n    }\n  };\n};","map":{"version":3,"names":["GET_ORDER_NUMBER_ENDPOINT","getServerResponse","CLEAR_CONSTRUCTOR","UPLOAD_ORDER_DETAILS_REQUEST","UPLOAD_ORDER_DETAILS_SUCCESS","UPLOAD_ORDER_DETAILS_FAILED","getOrderNum","dataToPost","dispatch","type","method","headers","authorization","localStorage","getItem","body","JSON","stringify","then","res","payload","order","number","e"],"sources":["/Users/reinaka/Documents/untitled folder/_stellar_/react-burger/src/services/actions/order-details-actions.ts"],"sourcesContent":["import { GET_ORDER_NUMBER_ENDPOINT } from '../../constants/constants';\nimport { getServerResponse } from '../functions/getServerResponse';\nimport { CLEAR_CONSTRUCTOR } from './constructor-actions';\nimport { AppDispatch } from '../types/thunkTypes';\n\nexport const UPLOAD_ORDER_DETAILS_REQUEST : 'UPLOAD_ORDER_DETAILS_REQUEST' = 'UPLOAD_ORDER_DETAILS_REQUEST';\nexport const UPLOAD_ORDER_DETAILS_SUCCESS : 'UPLOAD_ORDER_DETAILS_SUCCESS' = 'UPLOAD_ORDER_DETAILS_SUCCESS';\nexport const UPLOAD_ORDER_DETAILS_FAILED : 'UPLOAD_ORDER_DETAILS_FAILED' = 'UPLOAD_ORDER_DETAILS_FAILED';\n\nexport interface IOrderRequestAction {\n    readonly type : typeof UPLOAD_ORDER_DETAILS_REQUEST\n}\n\nexport interface IOrderSuccess {\n    readonly type : typeof UPLOAD_ORDER_DETAILS_SUCCESS,\n    readonly payload : number\n}\n\nexport interface IOrderFailed {\n    readonly type : typeof UPLOAD_ORDER_DETAILS_FAILED\n}\n\nexport type TOrderActions = IOrderRequestAction | IOrderSuccess | IOrderFailed;\n\nexport const getOrderNum = (dataToPost : {\"ingredients\" : string[]}) => {\n    return async function(dispatch : AppDispatch) {\n        try {\n            dispatch({\n                type: UPLOAD_ORDER_DETAILS_REQUEST\n            });\n            getServerResponse(GET_ORDER_NUMBER_ENDPOINT, {\n                method: 'POST',\n                headers: {\n                'Content-Type': 'application/json',\n                authorization: localStorage.getItem('accessToken'),\n                },\n                body: JSON.stringify(dataToPost)\n            })\n            .then(res => {\n                    dispatch({\n                        type: UPLOAD_ORDER_DETAILS_SUCCESS,\n                        payload: res.order.number,\n                    })\n                    dispatch({\n                        type: CLEAR_CONSTRUCTOR\n                    })\n                }\n            )\n        } catch (e) {\n            dispatch({\n                type: UPLOAD_ORDER_DETAILS_FAILED\n            })\n        }\n    }\n}"],"mappings":"AAAA,SAASA,yBAAyB,QAAQ,2BAA2B;AACrE,SAASC,iBAAiB,QAAQ,gCAAgC;AAClE,SAASC,iBAAiB,QAAQ,uBAAuB;AAGzD,OAAO,MAAMC,4BAA6D,GAAG,8BAA8B;AAC3G,OAAO,MAAMC,4BAA6D,GAAG,8BAA8B;AAC3G,OAAO,MAAMC,2BAA2D,GAAG,6BAA6B;AAiBxG,OAAO,MAAMC,WAAW,GAAIC,UAAuC,IAAK;EACpE,OAAO,gBAAeC,QAAsB,EAAE;IAC1C,IAAI;MACAA,QAAQ,CAAC;QACLC,IAAI,EAAEN;MACV,CAAC,CAAC;MACFF,iBAAiB,CAACD,yBAAyB,EAAE;QACzCU,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACT,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAEC,YAAY,CAACC,OAAO,CAAC,aAAa;QACjD,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,UAAU;MACnC,CAAC,CAAC,CACDW,IAAI,CAACC,GAAG,IAAI;QACLX,QAAQ,CAAC;UACLC,IAAI,EAAEL,4BAA4B;UAClCgB,OAAO,EAAED,GAAG,CAACE,KAAK,CAACC;QACvB,CAAC,CAAC;QACFd,QAAQ,CAAC;UACLC,IAAI,EAAEP;QACV,CAAC,CAAC;MACN,CACJ,CAAC;IACL,CAAC,CAAC,OAAOqB,CAAC,EAAE;MACRf,QAAQ,CAAC;QACLC,IAAI,EAAEJ;MACV,CAAC,CAAC;IACN;EACJ,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}