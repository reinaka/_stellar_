{"ast":null,"code":"var _jsxFileName = \"/Users/reinaka/Documents/untitled folder/_stellar_/react-burger/src/components/burger-ingredients/ingredient-card/ingredient-card.tsx\",\n  _s = $RefreshSig$();\nimport styles from './ingredient-card.module.css';\nimport { useDrag } from 'react-dnd';\nimport { memo, useState, useEffect } from 'react';\nimport { useAppSelector } from '../../../services/hooks/reduxTypes';\nimport { INGREDIENT } from '../../../constants/constants';\nimport { selectBurgerConstructorItems, selectSelectedBun } from '../../../services/functions/selectorFunctions';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Price } from '../../ui-elements/price/price';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IngredientCard = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(props => {\n  _s();\n  const ingredient = props.ingredient;\n  const [quantity, setQuantity] = useState(null);\n  const constructorIngredients = useAppSelector(selectBurgerConstructorItems);\n  const selectedBun = useAppSelector(selectSelectedBun);\n  const location = useLocation();\n  useEffect(() => {\n    if (ingredient.type === 'bun') {\n      if (selectedBun) {\n        selectedBun._id === ingredient._id ? setQuantity(2) : setQuantity(null);\n      } else {\n        setQuantity(null);\n      }\n    } else {\n      let count = 0;\n      if (constructorIngredients) {\n        constructorIngredients.forEach(item => {\n          if (item && item.ingredient._id === ingredient._id) {\n            count++;\n          }\n        });\n      }\n      count > 0 ? setQuantity(count) : setQuantity(null);\n    }\n  }, [constructorIngredients, ingredient._id, ingredient.type, selectedBun]);\n\n  //dnd\n  const [{\n    isDragging\n  }, ref] = useDrag({\n    type: INGREDIENT,\n    item: ingredient,\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n  return /*#__PURE__*/_jsxDEV(Link, {\n    to: {\n      pathname: `/ingredients/${ingredient._id}`\n    },\n    state: {\n      background: location\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref,\n      draggable: true,\n      children: [quantity && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.quantity,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_digits-default\",\n          children: quantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: ingredient.image,\n        className: \"pr-4 pl-4\",\n        alt: ingredient.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Price, {\n        price: ingredient.price,\n        styles: \"mt-1 mb-1 pr-4 pl-4 pt-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `text text_type_main-default ${styles.nameText}`,\n        children: ingredient.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this)\n  }, ingredient._id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 13\n  }, this);\n}, \"CsHNOSIZR54imEWVsd4kAjYiTQI=\", false, function () {\n  return [useAppSelector, useAppSelector, useLocation, useDrag];\n})), \"CsHNOSIZR54imEWVsd4kAjYiTQI=\", false, function () {\n  return [useAppSelector, useAppSelector, useLocation, useDrag];\n});\n_c2 = IngredientCard;\nexport default IngredientCard;\nvar _c, _c2;\n$RefreshReg$(_c, \"IngredientCard$memo\");\n$RefreshReg$(_c2, \"IngredientCard\");","map":{"version":3,"names":["styles","useDrag","memo","useState","useEffect","useAppSelector","INGREDIENT","selectBurgerConstructorItems","selectSelectedBun","Link","useLocation","Price","jsxDEV","_jsxDEV","IngredientCard","_s","_c","props","ingredient","quantity","setQuantity","constructorIngredients","selectedBun","location","type","_id","count","forEach","item","isDragging","ref","collect","monitor","to","pathname","state","background","children","draggable","className","fileName","_jsxFileName","lineNumber","columnNumber","src","image","alt","name","price","nameText","_c2","$RefreshReg$"],"sources":["/Users/reinaka/Documents/untitled folder/_stellar_/react-burger/src/components/burger-ingredients/ingredient-card/ingredient-card.tsx"],"sourcesContent":["import styles from './ingredient-card.module.css';\nimport { useDrag } from 'react-dnd';\nimport { memo, useState, useEffect } from 'react';\nimport { useAppSelector } from '../../../services/hooks/reduxTypes';\nimport { INGREDIENT } from '../../../constants/constants';\nimport { selectBurgerConstructorItems, selectSelectedBun } from '../../../services/functions/selectorFunctions';\nimport { Link, useLocation } from 'react-router-dom';\nimport { TIngredient, TIngredientWithUUID } from '../../../services/types/types';\nimport { Price } from '../../ui-elements/price/price';\n\nconst IngredientCard = memo((props : {ingredient : TIngredient}) => {\n    const ingredient = props.ingredient;\n    const [quantity, setQuantity] = useState<number | null>(null);\n    const constructorIngredients = useAppSelector(selectBurgerConstructorItems);\n    const selectedBun = useAppSelector(selectSelectedBun);\n    const location = useLocation();\n\n    useEffect(() => {\n        if(ingredient.type === 'bun' ) {\n            if(selectedBun) {\n            selectedBun._id === ingredient._id\n            ? setQuantity(2)\n            : setQuantity(null)\n            } else {\n                setQuantity(null)\n            }\n        } else {\n            let count = 0;\n            if(constructorIngredients) {\n                constructorIngredients.forEach((item : TIngredientWithUUID) => {\n                    if(item && (item.ingredient._id === ingredient._id)) {\n                        count++;\n                    }\n                })\n            }\n            count > 0 ? setQuantity(count) : setQuantity(null);\n        }\n        \n    }, [constructorIngredients, ingredient._id, ingredient.type, selectedBun])\n\n    //dnd\n    const [{isDragging}, ref] = useDrag({\n        type: INGREDIENT,\n        item: ingredient,\n        collect: monitor => ({\n            isDragging: monitor.isDragging()\n        })\n    })\n\n    return (\n            <Link\n                key={ingredient._id} \n                to={{ pathname: `/ingredients/${ingredient._id}` }}\n                state={{ background: location }}\n            >\n                <div ref={ref} draggable={true}>\n                    {quantity && (\n                        <div className={styles.quantity}>\n                            <p className=\"text text_type_digits-default\">{quantity}</p>\n                        </div>\n                    )}\n                    <img src={ingredient.image} className='pr-4 pl-4' alt={ingredient.name}/>\n                    <Price price={ingredient.price} styles=\"mt-1 mb-1 pr-4 pl-4 pt-1\"/>\n                    <p className={`text text_type_main-default ${styles.nameText}`}>{ingredient.name}</p>\n                </div>\n            </Link>\n        )\n});\n\nexport default IngredientCard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}